let Blockchain,Transaction,createWallet,validateWallet;_9b3‍.w("./src/blockchain",[["default",["Blockchain"],function(v){Blockchain=v}]]);_9b3‍.w("./src/transaction",[["default",["Transaction"],function(v){Transaction=v}]]);_9b3‍.w("./src/wallet",[["createWallet",["createWallet"],function(v){createWallet=v}],["validateWallet",["validateWallet"],function(v){validateWallet=v}]]);



// Init Blockchain
const SIMPLE_BLOCKCHAIN = new Blockchain();

// setup wallet, create wallets
const myWallet = createWallet();
const yourWallet = createWallet();

// output that gets the public key from the private key.
_9b3‍.g.console.log("is the myWallet from privateKey equals to publicKey?", validateWallet(myWallet.privateKey, myWallet.publicKey));

// transactions, initiate a transaction and transfer 60 from own wallet to your wallet.
const tx1 = new Transaction(myWallet.publicKey, yourWallet.publicKey, 60);

// Sign with private key
tx1.signTransaction(myWallet.keyPair);

// submit a transaction
SIMPLE_BLOCKCHAIN.addTransaction(tx1);

console.log('starting the miner of block 1...');
SIMPLE_BLOCKCHAIN.minePendingTransactions(myWallet.publicKey);

// add more transactions and blocks to achieve a blockchain with 3 blocks of height
const tx2 = new Transaction(myWallet.publicKey, yourWallet.publicKey, 80);
tx2.signTransaction(myWallet.keyPair);
SIMPLE_BLOCKCHAIN.addTransaction(tx2);
console.log('starting the miner of block 2...');
SIMPLE_BLOCKCHAIN.minePendingTransactions(myWallet.publicKey);

const tx3 = new Transaction(myWallet.publicKey, yourWallet.publicKey, 100);
tx3.signTransaction(myWallet.keyPair);
SIMPLE_BLOCKCHAIN.addTransaction(tx3);
console.log('starting the miner of block 3...');
SIMPLE_BLOCKCHAIN.minePendingTransactions(myWallet.publicKey);

// If the transfer is successful, the balance of your account will be 60.
_9b3‍.g.console.log("Balance of your account is: ", SIMPLE_BLOCKCHAIN.getBalanceOfAddress(yourWallet.publicKey));

// Blockchain validation test
_9b3‍.g.console.log("is the chain valid? " + SIMPLE_BLOCKCHAIN.isChainValid());

// Manually altered data in the blockchain.
SIMPLE_BLOCKCHAIN.chain[1].transactions[0].amount = 200;

_9b3‍.g.console.log("is the chain still valid? " + SIMPLE_BLOCKCHAIN.isChainValid());

// print the entire blockchain.
_9b3‍.g.console.log(JSON.stringify(SIMPLE_BLOCKCHAIN, null, 4));

